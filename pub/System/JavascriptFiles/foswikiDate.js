foswiki.Date={MONTH_LENGTHS:[31,28,31,30,31,30,31,31,30,31,30,31],MONTH_NUMBERS:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},_daysInYear:function(a){if(a%400){return 366}if(a%100){return 365}if(a%4){return 366}return 365},parseDate:function(u,l){var c,w=0,j,f,a,q,n,i,t,g,v,k,p,e,o,r;u=u.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(l){w=new Date().getTimezoneOffset()*60*1000}c=/(\d+)[\-\s]+([a-z]{3})[\-\s]+(\d+)(?:[\-\s]+(\d+):(\d+))?/i;if(u.match(c)){j=RegExp.$1!==""?parseInt(RegExp.$1,10):1;f=RegExp.$2!==""?foswiki.Date.MONTH_NUMBERS[RegExp.$2]-1:0;a=RegExp.$3!==""?parseInt(RegExp.$3,10):1;q=RegExp.$4!==""?parseInt(RegExp.$4,10):0;n=RegExp.$5!==""?parseInt(RegExp.$5,10):0;i=RegExp.$6!==""?parseInt(RegExp.$6,10):0;return new Date(a,f,j,q,n,i).getTime()+w}c=/(\d\d\d\d)(?:-(\d\d)(?:-(\d\d))?)?(?:T(\d\d)(?::(\d\d)(?::(\d\d(?:\.\d+)?))?)?)?(Z|[\-+]\d\d(?::\d\d)?)?/;if(u.match(/T/)&&u.match(c)){a=RegExp.$1;f=RegExp.$2!==""?parseInt(RegExp.$2,10)-1:0;j=RegExp.$3!==""?parseInt(RegExp.$3,10):1;q=RegExp.$4!==""?parseInt(RegExp.$4,10):0;n=RegExp.$5!==""?parseInt(RegExp.$5,10):0;i=RegExp.$6!==""?parseInt(RegExp.$6,10):0;t=RegExp.$7!==""?RegExp.$7:"";if(t==="Z"){w=0}else{if(t.match(/([\-+])(\d\d)(?::(\d\d))?/)){var b=RegExp.$2!==""?parseInt(RegExp.$2,10):0;var x=RegExp.$3!==""?parseInt(RegExp.$3,10):0;var d=(b*60+x);d*=RegExp.$1==="-"?1:-1;w=d*60*1000}}return new Date(a,f,j,q,n,i).getTime()+w}c=/^(\d\d+)(?:\s*[\/\s.\-]\s*(\d\d?)(?:\s*[\/\s.\-]\s*(\d\d?)(?:\s*[\/\s.\-]\s*(\d\d?)(?:\s*[:.]\s*(\d\d?)(?:\s*[:.]\s*(\d\d?))?)?)?)?)?$/;if(u.match(c)){g=RegExp.$1;f=RegExp.$2;j=RegExp.$3;q=RegExp.$4;n=RegExp.$5;i=RegExp.$6;if(f!==""&&(f<1||f>12)){return undefined}v=f!==""?f-1:0;k=foswiki.Date.MONTH_LENGTHS[v];if(v===1&&foswiki.Date._daysInYear(g)===366){k=29}if(j!==""&&(j<0||j>k)){return undefined}if(q!==""&&(q<0||q>24)){return undefined}if(n!==""&&(n<0||n>60)){return undefined}if(i!==""&&(i<0||i>60)){return undefined}if(g!==""&&g<60){return undefined}p=j!==""?j:1;e=q!==""?q:0;o=n!==""?n:0;r=i!==""?i:0;return new Date(g,v,p,e,o,r).getTime()+w}}};